
# RISC-V Architecture Simulator and Assembler

## ุชูุณุนู ุฏููุฏฺฏุงู

ุนูุฑุถุง ูุฎุชุงุฑ  -  ุณุฏ ูุญูุฏ ุงูู ุฑุฌุงุฆ  - ูุญูุฏ ุฌูุงุฏ ุนุจุงุณ


## ๐ง ุฏุฑุจุงุฑู ูพุฑูฺู

ุงู ูพุฑูฺู ฺฉ **ุงุณูุจูุฑ ู ุดุจูโุณุงุฒ ุณุงุฏู ุจุฑุง ูุนูุงุฑ RISC-V (ุณุทุญ RV32I)** ุงุณุช. ุจุฑูุงูู ูุงุฏุฑ ุงุณุช ูุงู ุงุณูุจู (`program.asm`) ุฑุง ุฏุฑ ฺูุงุฑ ูุฑุญูู ุจู ุตูุฑุช ฺฉุงูู ูพุฑุฏุงุฒุด ู ุงุฌุฑุง ฺฉูุฏ:

1. **ูพุงุณ ุงูู: ุชุญูู ูุจูโูุง ู ุฑุงูููุงูุง (directives)**
2. **ูพุงุณ ุฏูู: ุฑูุฒฺฏุฐุงุฑ (Encoding) ุฏุณุชูุฑูุง**
3. **ุชููุฏ ูุงู ุฎุฑูุฌ ุจุงูุฑ (`output.txt`)**
4. **ุงุฌุฑุง ูุฑุญููโุจูโูุฑุญูู ุฏุณุชูุฑุงุช ุจุง ุดุจูโุณุงุฒ ุฏูู ุณุฎุชโุงูุฒุงุฑ (Simulator)**

---

## ๐ ุณุงุฎุชุงุฑ ูุงูโูุง

```
/project-root
โ
โโโ input.asm             โ ูุงู ุงุณูุจู ููููู
โโโ output.txt            โ ูุงู ุจุงูุฑ ุฎุฑูุฌ ุจู ุตูุฑุช ุฏูุฏู
โ
โโโ main.cpp              โ ูุงู ุงุตู ุจุฑูุงูู: ุงุฌุฑุง ฺฉู ูุฑุงุญู
โโโ encoder.cpp/.h        โ ุฑูุฒฺฏุฐุงุฑ ุฏุณุชูุฑุงุช RISC-V ุจู ุจุงูุฑ
โโโ simulator.cpp/.h      โ ูพุงุฏูโุณุงุฒ ุดุจูโุณุงุฒ ูุนูุงุฑ RV32I
โโโ symbol_table.cpp/.h   โ ูฺฏูุฏุงุฑ ูุจูโูุง ู ุขุฏุฑุณโูุง
โ
โโโ Makefile (ุงุฎุชุงุฑ)   โ ุจุฑุง ฺฉุงููพุงู ุณุฑุนโุชุฑ (ุฏุฑ ุตูุฑุช ูุงุฒ)
โโโ README.md             โ ุชูุถุญุงุช ูพุฑูฺู
```

---

## โ๏ธ ูพุดโูุงุฒูุง

- ฺฉุงููพุงูุฑ C++ ุงุณุชุงูุฏุงุฑุฏ (ูุซูุงู `g++`)
- ุณุณุชู ุนุงูู Windows/Linux/Mac
- ูุงู ุงุณูุจู ูุฑูุฏ (`input.asm`)

---

## ๐๏ธ ูุญูู ุจูุฏ (Build) ูพุฑูฺู

ุงฺฏุฑ ูุงูโูุง ุฌุฏุง ูุณุชูุฏ:

```bash
g++ -std=c++11 -o riscv main.cpp encoder.cpp simulator.cpp symbol_table.cpp
```

ุงฺฏุฑ ุงุฒ `Makefile` ุงุณุชูุงุฏู ูโฺฉูุฏ:

```bash
make
```

---

## โถ๏ธ ูุญูู ุงุฌุฑุง ูพุฑูฺู

ูพุณ ุงุฒ ฺฉุงููพุงูุ ุชููุง ฺฉุงู ุงุณุช ุฏุณุชูุฑ ุฒุฑ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
./riscv
```

ุฏุฑ ุงุฌุฑุง ุจุฑูุงูู:

- ูุงู `input.asm` ุฎูุงูุฏู ูโุดูุฏ.
- ูุงู ุฏูุฏู `output.txt` ุชููุฏ ูโุดูุฏ.
- ุดุจูโุณุงุฒ ุฏุณุชูุฑูุง ุฑุง ฺฏุงูโุจูโฺฏุงู ุงุฌุฑุง ูโฺฉูุฏ ู ูุถุนุช ุฑุฌุณุชุฑูุง ู ุญุงูุธู ุฑุง ูุดุงู ูโุฏูุฏ.

---

## ๐ ูุซุงู `input.asm`

```asm
.org 0x1000

start:
  addi x1, x0, 10
  addi x2, x0, 5
  add  x3, x1, x2
  sub  x4, x3, x2
  beq  x4, x1, match
  addi x5, x0, 1

match:
  lw x6, 0(x10)
  addi x7, x0, 99

halt:
  jal x0, halt

.org 0x2000
.word 1234
.word 5678
```

---

## ๐ ูพุดุชุจุงู ุงุฒ ุฑุงูููุงูุง (Directives)

| ุฑุงูููุง        | ุนููฺฉุฑุฏ                                               |
|---------------|------------------------------------------------------|
| `.org`        | ุชูุธู ุขุฏุฑุณ ุดุฑูุน                                       |
| `.word`       | ูุฑุงุฑ ุฏุงุฏู ููุฏุงุฑ 32 ุจุช ุฏุฑ ุญุงูุธู                     |
| `.half`       | ูุฑุงุฑ ุฏุงุฏู ููุฏุงุฑ 16 ุจุช ุฏุฑ ุญุงูุธู                     |
| `.byte`       | ูุฑุงุฑ ุฏุงุฏู ููุฏุงุฑ 8 ุจุช ุฏุฑ ุญุงูุธู                      |
| `.align n`    | ุชุฑุงุฒ ฺฉุฑุฏู ุขุฏุฑุณ ุจู ุชูุงู ฒ ุงุฒ `n`                      |
| `i rd, imm`   | ุจุงุฑฺฏุฐุงุฑ ููุฏุงุฑ imm ุจู rd ุจุง ุงุณุชูุงุฏู ุงุฒ `lui+addi` ุง `addi` |

---

## ๐งช ูุงู ุฎุฑูุฌ

ูุงู `output.txt` ุฏุฑ ูุฑุญููู ุฏูู ุจูโุตูุฑุช **ุจุงูุฑ ุฏูุฏู (binary mode)** ุงุฌุงุฏ ูโุดูุฏ ู ุดุงูู ุฏุณุชูุฑุงุช ุฑูุฒฺฏุฐุงุฑโุดุฏู RISC-V ุงุณุช. ุงู ูุงู ุจู ุนููุงู ูุฑูุฏ ุจุฑุง ุดุจูโุณุงุฒ ุงุณุชูุงุฏู ูโุดูุฏ.

---

## โ ุฎุฑูุฌ ุดุจูโุณุงุฒ

ุฏุฑ ูุฑ ฺุฑุฎู ฺฉูุงฺฉุ ูุถุนุช ุณุณุชู ุจู ุงู ุดฺฉู ููุงุด ุฏุงุฏู ูโุดูุฏ:

```
clock: 4
 x0: 00000000  x1: 0000000A  x2: 00000005 ...
 PC: 00001010  MAR: 00001000  MDR: 00A00093 ...
```

